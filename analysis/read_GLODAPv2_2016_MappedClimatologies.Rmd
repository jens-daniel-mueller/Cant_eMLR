---
title: "GLODAPv2_2016_MappedClimatologies"
author: "Jens Daniel MÃ¼ller"
date:  "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  workflowr::wflow_html:
    number_sections: true
    toc_depth: 3
    toc_float:
      collapsed: false
editor_options:
  chunk_output_type: console
---

```{r global_options, include = FALSE}
knitr::opts_chunk$set(warning=FALSE, message=FALSE)
```

```{r library, message=FALSE, warning=FALSE}
library(tidyverse)
library(lubridate)
library(tidync)
```


```{r ggplot_theme, include = FALSE}
theme_set(theme_bw())
```

# Read ncdf files

- Data source: [glodap.info](https://www.glodap.info/)

Files used:

GLODAPv2.2016b.Cant.nc

```{r read_GLODAPv2_2016_MappedClimatologies_netcdfs}

Cant <- tidync(here::here("data/GLODAPv2_2016b_MappedClimatologies",
                          "GLODAPv2.2016b.Cant.nc"))
# print(Cant)

Cant_slice <- Cant %>% hyper_filter(depth_surface = depth_surface == 20)
# Cant_slice

Cant_slice_data <- Cant_slice %>% hyper_tibble()
Cant_data <- Cant %>% hyper_tibble()

Cant_data %>% 
  ggplot(aes(lon, lat, fill=Cant))+
  geom_raster()+
  scale_fill_viridis_b()+
  facet_wrap(~depth_surface)

Cant_slice_data %>% 
  ggplot(aes(lon, lat, fill=Cant))+
  geom_raster()+
  scale_fill_viridis_b()+
  facet_wrap(~depth_surface)

Cant_data_inventory <- Cant_data %>% 
  group_by(lon, lat) %>% 
  summarise(Cant_inventory = sum(Cant)) %>% 
  ungroup()

Cant_data_inventory %>% 
  ggplot(aes(lon, lat, fill=Cant_inventory))+
  geom_raster()+
  scale_fill_viridis_c()

```

# Open tasks

- none

# Questions

- none
